(this["webpackJsonpCC.LMS.WebUI"]=this["webpackJsonpCC.LMS.WebUI"]||[]).push([[25],{1037:function(e,t,n){},3100:function(e,t,n){"use strict";n.r(t),n.d(t,"StudentPage",(function(){return B}));var s=n(22),r=n.n(s),a=n(24),o=n(15),c=n(16),i=n(17),u=n(18),l=n(12),d=n.n(l),h=n(20),p=n(53),j=n(26),m=n.n(j),b=(n(1037),n(37)),O=n(13),f=n(11),g={announcements:[],fetching:!0,openAnnouncementModal:!1,selectedAnnouncement:null,selectedSection:null},v=function(e){Object(i.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).state=g,e.setOpenAnnouncementModal=function(t){e.setState({openAnnouncementModal:t})},e.closeAnnouncementModal=function(){e.setState({openAnnouncementModal:!1})},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=Object(a.a)(r.a.mark((function e(){var t=this;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.b.get("user/announcements",this.props.oidcUser).then((function(e){t.setState({announcements:e})})).catch((function(e){return console.error(e)}));case 2:this.setState({fetching:!1});case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"renderAnnouncements",value:function(){var e=this;return this.state.fetching?Object(f.jsx)("ul",{children:Object(f.jsx)(O.W,{style:{padding:20},menuDirection:"none",children:Object(f.jsx)(O.j,{})})}):Object(f.jsx)("ul",{style:{margin:0,padding:0},children:0===this.state.announcements.length?Object(f.jsx)(O.Y,{isEmpty:!0,emptyMessage:"There are no announcements"}):this.state.announcements.map((function(t){var n=e.props.userCourses.find((function(e){return e.sectionId===t.sectionId}));return e.getAnnouncementItem(t,n)}))})}},{key:"getAnnouncementItem",value:function(e,t){var n=this;return Object(f.jsx)(O.W,{style:{padding:20},onClick:function(){n.setState({selectedAnnouncement:e,selectedSection:t,openAnnouncementModal:!0})},children:t&&Object(f.jsxs)("h3",{style:{margin:0,fontSize:"14px"},children:[t.courseCode," -"," ",m.a.utc(t.startDateUTC).format("L")," - ",m.a.utc(t.endDateUTC).format("L")]})},e.sectionId)}},{key:"render",value:function(){var e,t,n;return Object(f.jsxs)("div",{children:[Object(f.jsx)(O.K,{size:"large",close:this.closeAnnouncementModal,show:this.state.openAnnouncementModal,title:"".concat(null===(e=this.state.selectedSection)||void 0===e?void 0:e.courseCode," - ").concat(null===(t=this.state.selectedSection)||void 0===t?void 0:t.courseName),cancelText:"Close",showFooter:!0,id:"announcement-modal",children:Object(f.jsx)(O.fb,{content:null===(n=this.state.selectedAnnouncement)||void 0===n?void 0:n.html,className:"force-wrap"})}),Object(f.jsx)(O.U,{header:Object(f.jsx)(O.V,{icon:"newspaper-o",title:"Announcements"}),children:this.renderAnnouncements()})]})}}]),n}(l.Component),y=Object(h.b)((function(e){var t=e.oidc,n=e.student;return{oidcUser:t.user,userCourses:n.data.courses.data}}))(v),C=n(25),S=n(35),A=n(14),x=n(258),E={assignmentsToAlert:[]},D=Object(h.b)((function(e){var t=e.student;return{assignmentsDueSoon:x.c.getAssignmentsDueSoon(t),courses:t.data.courses.data}}))(function(e){Object(i.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).state=E,e.handleDismissAlert=function(){e.setState({assignmentsToAlert:E.assignmentsToAlert}),e.props.saveLocalStorage(e.props.assignmentsDueSoon.map((function(e){return e.activityId})))},e}return Object(c.a)(n,[{key:"getAssignmentsToAlert",value:function(){var e=this;return this.props.assignmentsDueSoon.filter((function(t){return!e.props.alertedActivityIds||e.props.alertedActivityIds.every((function(e){return e!==t.activityId}))}))}},{key:"getAssignmentsByCourse",value:function(){var e=this;return this.state.assignmentsToAlert.reduce((function(t,n){var s=e.props.courses.find((function(e){return e.courseEnrollmentId===n.courseEnrollmentId}));return s?Object(A.a)(Object(A.a)({},t),{},Object(C.a)({},s.courseCode,t[s.courseCode]?{assignments:[].concat(Object(S.a)(t[s.courseCode].assignments),[n]),course:s}:{assignments:[n],course:s})):t}),{})}},{key:"init",value:function(){var e=this.getAssignmentsToAlert();this.setState({assignmentsToAlert:e})}},{key:"componentDidMount",value:function(){this.init()}},{key:"componentDidUpdate",value:function(e,t){e.assignmentsDueSoon!==this.props.assignmentsDueSoon&&this.init()}},{key:"render",value:function(){return this.state.assignmentsToAlert.length>0?Object(f.jsx)(O.d,{type:"Warning",onDismiss:this.handleDismissAlert,children:Object(f.jsxs)("div",{className:"cc-contrast-black",children:[Object(f.jsx)("div",{style:{fontWeight:600},children:"You have assignments due soon:"}),this.renderAssignmentsDue()]})}):null}},{key:"renderAssignmentsDue",value:function(){var e=this.getAssignmentsByCourse();return Object.keys(e).map((function(t){var n=e[t],s=n.assignments,r=n.course.timeZoneId,a=s[0],o=a.dueDateUTC,c=a.activityId,i=s.length>1;return o?Object(f.jsx)("div",{style:{marginTop:"0.75em"},children:Object(f.jsxs)("div",{children:[Object(f.jsxs)("span",{style:{fontWeight:600},children:[t,": "]}),"".concat(s.length," assignment").concat(i?"s":""," ").concat(i?"are":"is"," due in "),Object(f.jsx)("span",{style:{fontWeight:600},children:Object(f.jsx)(O.u,{dueDateUTC:o,timeZoneId:r,id:c,studentView:!0})})]})},t):null}))}}]),n}(d.a.Component)),k=n(1280),T=n(41),I=n(27),U=Object(I.b)((function(e){return{panelHeaderRoot:Object(C.a)({},e.media.extraSmall,{"& input[type=text]":{width:130}})}}));function _(e){var t=U();return Object(f.jsx)(O.U,{header:Object(f.jsx)(O.V,{icon:"book",title:"Courses",updateFilter:e.updateFilter,filter:e.filter,inputPlaceholder:"Filter...",large:!0,className:t.panelHeaderRoot})})}var w=n(30),L=n(23),M=n(1022),R=function(e){Object(i.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).goToLesson=function(t,n){var s=Object(T.a)(e).props;s.history.push("/student/".concat(n,"/lesson/").concat(t,"/topic")),s.SET_ACTIVE_COURSE(s.courses.find((function(e){return e.courseEnrollmentId===n}))||null)},e.getLdaForSection=function(t){return e.props.ldaData&&e.props.ldaData[0]&&e.props.ldaData[0].attendance?e.props.ldaData[0].attendance.find((function(e){return e.courseEnrollmentId===t})):null},e}return Object(c.a)(n,[{key:"render",value:function(){var e=this,t=this.props;return Object(f.jsxs)("div",{children:[Object(f.jsx)(_,{filter:t.coursesFilter,updateFilter:t.UPDATE_COURSES_FILTER}),t.courses.map((function(n,s){return Object(f.jsx)(M.a,{userCourse:n,icon:Object(L.w)(n.courseIcon),units:n.units,goToLesson:function(t){e.goToLesson(t,n.courseEnrollmentId)},collapseByDefault:s>0,showLda:t.showLda,sectionLdaData:e.getLdaForSection(n.courseEnrollmentId)},n.courseEnrollmentId)})),t.areCoursesHidden&&!t.coursesFilter&&Object(f.jsx)("div",{className:"cc-show-past-coursework",style:{textAlign:"center"},children:Object(f.jsx)(O.v,{onClick:t.SHOW_CLOSED_COURSES,className:"cc-contrast-black",children:"Show Past Coursework"})})]})}}]),n}(l.Component),F=Object(h.b)((function(e){var t=e.student;return{courses:x.c.getVisibleCourses(t),coursesFilter:t.dashboard.coursesFilter,ldaData:t.data.attendance.data,areCoursesHidden:x.c.getVisibleCourses(t).length<t.data.courses.data.length}}),{UPDATE_COURSES_FILTER:x.a.UPDATE_COURSES_FILTER,SHOW_CLOSED_COURSES:x.a.SHOW_CLOSED_COURSES,SET_ACTIVE_COURSE:w.b.SET_ACTIVE_COURSE})(R),H=n(19),N=n(129),W=n(50),P=n(95),V=(n(617),n(1288)),z={textDecoration:"underline",cursor:"pointer"},B=function(e){Object(i.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"checkAndResetDetachHeader",value:function(){var e=this.props.location.pathname;Object(L.z)(e)||this.props.SET_DETACH_HEADER(!1)}},{key:"componentDidMount",value:function(){var e=Object(a.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.props.COMPOSE_MODULE(Object(P.c)(this.props.highContrast).body.baseBackgroundColor,!0,!1),this.checkAndResetDetachHeader(),this.props.fetchStudentDashBoard(this.props.history.replace,this.props.match.params.courseCode);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props;if(t.hasError)return Object(f.jsx)(O.y,{message:Object(f.jsxs)("span",{children:["An error occurred loading your student dashboard, please"," ",Object(f.jsx)("span",{style:z,onClick:function(){return e.props.fetchStudentDashBoard(e.props.history.replace,e.props.match.params.courseCode)},children:"try again"}),"."]})});if(!t.hasFetched)return Object(f.jsx)(O.I,{});if(!t.hasCourses)return Object(f.jsx)(O.y,{message:Object(f.jsxs)(l.Fragment,{children:["You have not been enrolled in any courses yet. In the mean time you can setup your ",Object(f.jsx)(p.Link,{to:"/profile",children:"Profile"}),", which can also be accessed by clicking the profile link at the top of the screen."]})});var n=t.studentCourses.courses.data.some((function(e){return e.isChatbotEnabled}));return Object(f.jsxs)("div",{className:"cc-dashboard",children:[Object(f.jsxs)("div",{className:"col-md-12",children:[Object(f.jsx)(O.J,{storageKey:"alertedActivityIds",render:function(e){var t=e.save,n=e.loadedData;return Object(f.jsx)(D,{saveLocalStorage:t,alertedActivityIds:n})}}),Object(f.jsx)("h1",{children:"My Dashboard"}),Object(f.jsxs)("div",{className:"row",children:[Object(f.jsxs)("div",{className:"col-md-5",children:[Object(f.jsx)(k.a,{}),Object(f.jsx)(y,{}),t.currentOrganization&&Object(f.jsx)(O.jb,{slackUrl:t.currentOrganization.slackUrl})]}),Object(f.jsx)("div",{className:"col-md-7",children:Object(f.jsx)(F,{history:t.history,showLda:!0})})]})]}),n&&Object(f.jsx)(V.a,{})]})}}]),n}(l.Component);t.default=Object(O.Ab)([H.kb.Student],!0,!0)(Object(h.b)((function(e){var t=e.student,n=e.commonData,s=e.shell,r=[N.a.Courses,N.a.GradeSummary];return{currentOrganization:n.currentOrganization.data,hasCourses:t.data.courses.data.length>0,hasFetched:W.f.getHasFetched(r,t.data),hasError:W.f.getHasError(r,t.data),highContrast:s.highContrast,studentCourses:t.data}}),{fetchStudentDashBoard:x.d.fetchStudentDashboard,COMPOSE_MODULE:w.b.COMPOSE_MODULE,SET_DETACH_HEADER:w.b.SET_DETACH_HEADER})(B))},617:function(e,t,n){}}]);
//# sourceMappingURL=25.bd34d916.chunk.js.map