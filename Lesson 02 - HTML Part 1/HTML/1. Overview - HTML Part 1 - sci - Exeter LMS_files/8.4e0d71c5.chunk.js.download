(this["webpackJsonpCC.LMS.WebUI"]=this["webpackJsonpCC.LMS.WebUI"]||[]).push([[8],{122:function(e,t,n){},1288:function(e,t,n){"use strict";var s=n(22),i=n.n(s),o=n(24),c=n(35),r=n(43),a=n(12),l=n(614),d=n(149),u=n(20),j=n(260),f=n(129),v=n(88),b=n(26),h=n.n(b),p=n(37),O=(n(122),n(11)),m=function(e){var t=e.onClose,n=e.conversationId,s=e.userId,c=Object(u.d)(),l=Object(u.e)((function(e){return e.oidc.user})),d=Object(a.useState)(null),f=Object(r.a)(d,2),v=f[0],b=f[1],h=function(e){b(e),"up"===e?(c(j.c.sendFeedbackThumb(!0)),t(e)):c(j.c.sendFeedbackThumb(!1))};return Object(O.jsxs)("div",{className:"feedback-container",children:["down"!==v&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("div",{style:{display:"flex",width:"100%",justifyContent:"flex-end"},children:Object(O.jsx)("i",{"aria-hidden":"true",role:"button",className:"fa fa-times chat-close",style:{cursor:"pointer"},onClick:function(){t("up")}})}),Object(O.jsx)("p",{children:"Is the response what you are looking for?"}),Object(O.jsxs)("div",{className:"feedback-buttons",children:[Object(O.jsx)("button",{onClick:function(){return h("up")},children:Object(O.jsx)("i",{className:"fa fa-thumbs-up"})}),Object(O.jsx)("button",{onClick:function(){return h("down")},children:Object(O.jsx)("i",{className:"fa fa-thumbs-down"})})]})]}),"down"===v&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("p",{children:"Sorry for the inconvenience. Would you like to seek help from a level 2 mentor?"}),Object(O.jsxs)("div",{className:"actions-container",children:[Object(O.jsx)("div",{role:"button",className:"mentor-request-button",onClick:Object(o.a)(i.a.mark((function e(){var o,c,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.b.post("chatbot/supportrequests/".concat(n,"?supportUrl=","".concat(window.location.protocol,"//").concat(window.location.host,"/admin/supporthub/newConversation/").concat(n,"/").concat(s)),l);case 2:return o=e.sent,c=o.transactionId,e.next=6,p.b.enqueueMessageHandler(c);case 6:r=e.sent,t("down",r.payload);case 8:case"end":return e.stop()}}),e)}))),children:"Request further support"}),Object(O.jsx)("button",{className:"decline-button",onClick:function(){return t("up")},children:"No, thanks"})]})]}),Object(O.jsx)("div",{})]})},x=n(306),g=n(550),y=n(615),w=n(616),S=function(e){var t=e.onClose,n=e.currentConversation,s=Object(u.e)((function(e){return e.oidc.user})),i=Object(a.useState)(0),o=Object(r.a)(i,2),c=o[0],l=o[1],j=Object(a.useState)(0),f=Object(r.a)(j,2),v=f[0],b=f[1],h=function(e){b(e)},m=function(e){l(e)},x=function(){var e=g(c);p.b.post("chatbot/supportrequests/rate/".concat(null===n||void 0===n?void 0:n.id,"/").concat(e),s),t()},g=function(e){switch(e){case 0:default:return d.h.None;case 1:return d.h.VeryPoor;case 2:return d.h.Poor;case 3:return d.h.Average;case 4:return d.h.Good;case 5:return d.h.Excellent}};return Object(O.jsxs)("div",{className:"feedback-container",children:[Object(O.jsx)("p",{children:"Rate your experience:"}),Object(O.jsx)("div",{className:"star-rating",children:[1,2,3,4,5].map((function(e){return Object(O.jsx)("span",{style:{fontSize:24,paddingRight:10},role:"button",className:e<=(v||c)?"fa fa-star":"fa fa-star-o",onMouseEnter:function(){return h(e)},onMouseLeave:function(){return h(0)},onClick:function(){return m(e)},tabIndex:0,onKeyDown:function(t){return function(e,t){"Enter"===e.key&&m(t)}(t,e)}},e)}))}),Object(O.jsxs)("div",{className:"actions-container",children:[Object(O.jsx)("button",{className:"decline-button",onClick:x,children:"No, thanks"}),Object(O.jsx)("button",{className:"mentor-request-button",onClick:x,children:"Submit"})]})]})},N=n(242),C=n(23),I=function(e){return h()(e,"HH:mm:ss").format("ha")};t.a=function(){var e,t,n,s=Object(u.d)(),b=Object(v.k)(),p=Object(v.n)(),k=Object(u.e)((function(e){return e.oidc.user})),T=Object(u.e)((function(e){return e.support.chatbot.openChatbot})),R=Object(u.e)((function(e){return e.support.chatbot.showHistory})),E=Object(u.e)((function(e){return e.support.chatbot.conversations})),_=Object(u.e)((function(e){return e.support.chatbot.currentConversation})),z=Object(u.e)((function(e){return e.support.chatbot.isUpdating})),A=Object(u.e)((function(e){var t;return null===(t=e.commonData.profileAboutMe.data)||void 0===t?void 0:t.userId})),U=Object(u.e)((function(e){return e.student.data.courses.data})),H=Object(u.e)((function(e){var t;return null===(t=e.support.chatbot.currentConversation)||void 0===t?void 0:t.isWaiting}),u.c),M=Object(u.e)((function(e){var t;return null===(t=e.support.chatbot.currentConversation)||void 0===t?void 0:t.isWaitingForRating}),u.c),D=Object(u.e)((function(e){return e.support.chatbot.showRateConversation})),W=Object(u.e)((function(e){return e.support.chatbot.isFetching})),F=Object(u.e)((function(e){return e.support.chatbot.hasFetched})),L=Object(a.useState)(!1),Y=Object(r.a)(L,2),B=Y[0],q=Y[1],P=Object(a.useState)(""),G=Object(r.a)(P,2),V=G[0],X=G[1],K=Object(a.useState)(!1),J=Object(r.a)(K,2),Q=J[0],Z=J[1],$=Object(a.useState)(0),ee=Object(r.a)($,2),te=ee[0],ne=ee[1],se=Object(a.useState)(p.path.includes("/dashboard")),ie=Object(r.a)(se,2),oe=ie[0],ce=ie[1],re=Object(a.useState)(Object(c.a)(E)),ae=Object(r.a)(re,2),le=ae[0],de=ae[1],ue=Object(a.useState)(null),je=Object(r.a)(ue,2),fe=je[0],ve=je[1],be=Object(a.useState)({day:"",availableFrom:"",availableUntil:""}),he=Object(r.a)(be,2),pe=he[0],Oe=he[1],me=Object(a.useRef)(null),xe=Object(a.useRef)(null),ge=function(){var e;null===(e=xe.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},ye=function(){var e;null===(e=xe.current)||void 0===e||e.scrollIntoView()};Object(a.useEffect)((function(){var e=E.sort((function(e,t){var n,s,i=Number(null===(n=e.messages[e.messages.length-1])||void 0===n?void 0:n.timestamp);return Number(null===(s=t.messages[t.messages.length-1])||void 0===s?void 0:s.timestamp)-i}));de(e)}),[E]),Object(a.useEffect)((function(){p.path.includes("/dashboard")?s(j.a.SET_SHOW_CHATBOT_HISTORY(!0)):s(j.a.SET_SHOW_CHATBOT_HISTORY(!1))}),[]),Object(a.useEffect)((function(){q(T)}),[T]),Object(a.useEffect)((function(){var e;ce(R),R||!_||(e=_).messages.filter((function(t){return t&&t.userId&&e.supportUser&&String(t.userId)===String(e.supportUser.userId)})).every((function(e){return e.isRead}))||s(j.c.markConversationAsRead(_.id,A))}),[R,_,s,A]),Object(a.useEffect)((function(){s(j.c.getUserConversations()),s(f.d.fetchCourses())}),[s]),Object(a.useEffect)((function(){Q&&ge()}),[Q]),Object(a.useEffect)(ge,[_]),Object(a.useEffect)((function(){oe||ye()}),[oe]),Object(a.useEffect)(ye,[B]);var we=function(){var e=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:""===V.trim()||z||(X(""),me.current&&(me.current.style.height="auto",Object(l.a)(me.current),me.current.style.overflowY="hidden",me.current.focus()),s(j.c.sendChatbotMessage(V,p.params.topicId)),(null===_||void 0===_?void 0:_.isOpen)||ne((function(e){return e+1})),te>=d.e&&!(null===_||void 0===_?void 0:_.isOpen)&&!(null===_||void 0===_?void 0:_.isWaiting)&&(Z(!0),ne(0)));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Se=function(e){s(j.a.SET_OPEN_CHATBOT(e))},Ne=p.url.includes("/dashboard"),Ce=p.url.includes(String(null===_||void 0===_?void 0:_.lessonId)),Ie=U.find((function(e){return Number(e.sectionId)===Number(null===_||void 0===_?void 0:_.sectionId)})),ke=null===Ie||void 0===Ie?void 0:Ie.endDateUTC,Te=!!ke&&Object(C.F)(ke)<Date.now();return M&&!D&&s(j.a.SET_SHOW_CHATBOT_SUPPORT_RATING(!0)),Object(O.jsx)("div",{className:"chat-bot ".concat(B?"open":"closed"),style:{zIndex:1e3},children:B?Object(O.jsx)("div",{className:"chat-container",children:W||!F?Object(O.jsx)("div",{children:Object(O.jsx)(N.a,{})}):oe?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("div",{className:"chat-top-bar",children:[Object(O.jsx)("div",{children:Object(O.jsx)("span",{style:{fontSize:16,fontWeight:800},children:"Message History"})}),Object(O.jsx)("div",{children:Object(O.jsx)("i",{"aria-hidden":"true",role:"button",className:"fa fa-times chat-close",onClick:function(){Se(!1)}})})]}),Object(O.jsx)("div",{className:"chat-messages",children:Object(O.jsx)(y.a,{conversations:le,onMessageClick:function(e){s(j.a.SET_CURRENT_CONVERSATION(e)),s(j.a.SET_SHOW_CHATBOT_HISTORY(!1))},emptyMessage:"Open a lesson to start chatting with the mentor assistant.",showResolved:!1,showCourses:!0})})]}):Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("div",{className:"chat-top-bar",children:[Object(O.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[!oe&&Object(O.jsx)(g.a,{style:{marginRight:16},icon:"fa fa-angle-left",size:30,onClick:function(){return s(j.a.SET_SHOW_CHATBOT_HISTORY(!0))}}),(null===_||void 0===_?void 0:_.isOpen)?Object(O.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[Object(O.jsx)("div",{children:(null===(e=_.supportUser)||void 0===e?void 0:e.profileMiniImageUrl)?Object(O.jsx)("img",{style:{width:40,height:40,borderRadius:20,margin:8},src:"".concat(null===(t=_.supportUser)||void 0===t?void 0:t.profileMiniImageUrl,"?access_token=").concat(k.access_token),alt:""}):Object(O.jsx)("i",{style:{fontSize:40,padding:8},className:"fa fa-user-circle"})}),Object(O.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(O.jsx)("h3",{style:{fontSize:16,margin:"6px 0px 0px 0px"},children:null===(n=_.supportUser)||void 0===n?void 0:n.userDisplayName}),Object(O.jsx)("span",{style:{fontSize:12},children:"".concat(null===_||void 0===_?void 0:_.courseCode,": ").concat(null===_||void 0===_?void 0:_.courseName)}),Object(O.jsxs)("span",{style:{fontSize:12},children:["Lesson: ",null===_||void 0===_?void 0:_.lessonName]})]})]}):Object(O.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[Object(O.jsx)("div",{children:Object(O.jsx)("i",{style:{fontSize:40,padding:8},className:"fa fa-user-circle"})}),Object(O.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(O.jsx)("h3",{style:{fontSize:16,margin:"2px 0px 0px 0px"},children:"Mentor Assistant"}),Object(O.jsx)("span",{style:{fontSize:12},children:"".concat(null===_||void 0===_?void 0:_.courseCode,": ").concat(null===_||void 0===_?void 0:_.courseName)}),Object(O.jsxs)("span",{style:{fontSize:12},children:["Lesson: ",null===_||void 0===_?void 0:_.lessonName]})]})]})]}),Object(O.jsx)("div",{children:Object(O.jsx)("i",{style:{position:"relative",bottom:17},"aria-hidden":"true",role:"button",className:"fa fa-times chat-close",onClick:function(){return Se(!1)}})})]}),Object(O.jsx)("div",{className:"chat-messages",style:{padding:8},children:(null===_||void 0===_?void 0:_.messages)&&Object(O.jsx)(x.a,{messages:_.messages,waitingOnResponse:z,children:Object(O.jsx)("div",{ref:xe})})}),!z&&Q&&Object(O.jsx)(m,{onClose:function(e,t){var n;if("down"===e&&(s(j.a.SET_IS_WAITING_FOR_SUPPORT(!0,null!==(n=null===_||void 0===_?void 0:_.id)&&void 0!==n?n:"")),t&&"object"===typeof t)){var i=h()().format("HH:mm:ss"),o=i>=t.availableFrom&&i<=t.availableUntil;ve(o),Oe(t)}Z(!1)},conversationId:_?_.id:"",userId:A||""}),H&&(!0===fe||null===fe?Object(O.jsx)(w.a,{onClick:function(){var e;s(j.c.cancelSupportRequest(null!==(e=null===_||void 0===_?void 0:_.id)&&void 0!==e?e:""))},content:"Waiting for a mentor to join the chat. You can continue to chat with the mentor assistant in the meantime.",showButton:!0,showLoading:!0,onClickContent:"Cancel Request"}):Object(O.jsx)(w.a,{onClick:function(){var e;s(j.c.cancelSupportRequest(null!==(e=null===_||void 0===_?void 0:_.id)&&void 0!==e?e:""))},children:Object(O.jsxs)("div",{style:{textAlign:"center"},children:[Object(O.jsx)("p",{children:"Mentor support is not available at this time."}),Object(O.jsx)("p",{style:{fontWeight:800},children:"Mentor Hours: ".concat(pe.availableFrom?I(pe.availableFrom):"9am"," MST - ").concat(pe.availableUntil?I(pe.availableUntil):"5pm"," MST.")}),Object(O.jsx)("p",{children:"You can wait and chat with the mentor assistant or cancel your request."})]}),showButton:!0,showLoading:!0,onClickContent:"Cancel Request"})),D&&M&&Object(O.jsx)(S,{onClose:function(){var e;s(j.a.SET_SHOW_CHATBOT_SUPPORT_RATING(!1)),s(j.a.SET_CONVERSATION_IS_WAITING_FOR_RATING(!1,null!==(e=null===_||void 0===_?void 0:_.id)&&void 0!==e?e:""))},currentConversation:_}),Ne||!Ce||Te?Object(O.jsx)(w.a,{onClick:function(){b.replace("/student/".concat(null===Ie||void 0===Ie?void 0:Ie.courseEnrollmentId,"/lesson/").concat(null===_||void 0===_?void 0:_.lessonId,"/topic"))},content:Te?"This section has ended. This chat is read-only.":"Open the lesson to continue chatting with the mentor assistant.",onClickContent:Te?void 0:"Open Lesson",showButton:!Te}):Object(O.jsx)("div",{className:"chat-input-area",children:Object(O.jsxs)("div",{className:"chat-input-container",children:[Object(O.jsx)("textarea",{ref:me,placeholder:"Type a message...",value:V,onChange:function(e){X(e.target.value),me.current&&Object(l.a)(me.current)},onKeyPress:function(e){return"Enter"!==e.key||e.shiftKey||z?null:(e.preventDefault(),we())}}),Object(O.jsx)("button",{className:"send-button",onClick:we,style:{cursor:z?"not-allowed":"pointer"},disabled:z,children:Object(O.jsx)("i",{className:"fa fa-paper-plane"})})]})})]})}):Object(O.jsx)("button",{className:"chat-bot-open-bubble",onClick:function(){Se(!0)},children:Object(O.jsx)("i",{className:"fa fa-commenting"})})})}},306:function(e,t,n){"use strict";var s=n(26),i=n.n(s),o=(n(12),n(3082)),c=n(276),r=n(20),a=n(198),l=(n(122),n(11));t.a=function(e){var t=e.messages,n=e.waitingOnResponse,s=e.children,d=e.reverse,u=Object(r.e)((function(e){return e.oidc.user})),j=Object(r.e)((function(e){return e.commonData.profileAboutMe.data})),f=Object(r.e)((function(e){var t;return null===(t=e.commonData.profileAboutMe.data)||void 0===t?void 0:t.userId})),v=t.filter((function(e){return String(e.userId)===String(f)&&"0"!==String(e.userId)})),b=v.length>0?v.length-1:-1,h=b>=0?v[b]:null,p=!h||h.isRead;return Object(l.jsxs)("div",{className:"chat-messages",children:[t.slice(2).map((function(e,n){var s;if("system"!==e.role){var r;if(null===(s=e.user)||void 0===s?void 0:s.profileImageUrl)r=Object(l.jsx)("img",{style:{width:26,height:26,borderRadius:13},src:"".concat(e.user.profileMiniImageUrl,"?access_token=").concat(null===u||void 0===u?void 0:u.access_token),alt:"User"});else if(String(null===j||void 0===j?void 0:j.userId)===String(e.userId)&&(null===j||void 0===j?void 0:j.profileMiniImageUrl))r=Object(l.jsx)("img",{style:{width:26,height:26,borderRadius:13},src:"".concat(null===j||void 0===j?void 0:j.profileMiniImageUrl,"?access_token=").concat(null===u||void 0===u?void 0:u.access_token),alt:"User"});else{var a=function(e,t){var n,s=e.find((function(e){var n;return String(e.userId)===t&&(null===(n=e.user)||void 0===n?void 0:n.profileMiniImageUrl)}));if(s)return null===(n=s.user)||void 0===n?void 0:n.profileMiniImageUrl}(t,String(e.userId));r=a?Object(l.jsx)("img",{style:{width:26,height:26,borderRadius:13},src:"".concat(a,"?access_token=").concat(null===u||void 0===u?void 0:u.access_token),alt:"User"}):Object(l.jsx)("i",{style:{fontSize:26},className:"fa fa-user-circle"})}var f=d?function(e){return e===c.c.User?c.c.Assistant:e===c.c.Assistant?c.c.User:e}(e.role):e.role,v="";if(e.timestamp){var b=i()().startOf("day"),O=i()(e.timestamp);v=O.isSame(b,"d")?O.format("h:mm A"):O.format("MM/DD/YYYY h:mm A")}return f===c.c.User?Object(l.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(l.jsxs)("div",{style:{display:"flex"},children:[Object(l.jsx)("div",{className:"chat-message ".concat(f),children:Object(l.jsx)(o.a,{children:e.content})}),Object(l.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"flex-end"},children:Object(l.jsx)("div",{className:"chat-message-".concat(f,"-img"),children:r})})]}),Object(l.jsxs)("div",{style:{alignSelf:"flex-end",height:15,marginBottom:12},children:[(null===h||void 0===h?void 0:h.timestamp)===e.timestamp&&p&&Object(l.jsx)("span",{className:"read-indicator",style:{marginRight:4},children:"Read"}),Object(l.jsx)("span",{style:{fontSize:12},children:v})]})]},n):Object(l.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(l.jsxs)("div",{style:{display:"flex"},children:[Object(l.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"flex-end"},children:Object(l.jsx)("div",{className:"chat-message-".concat(f,"-img"),children:r})}),Object(l.jsx)("div",{className:"chat-message ".concat(f),children:Object(l.jsx)(o.a,{children:e.content})},n)]}),Object(l.jsxs)("div",{style:{alignSelf:"flex-start",height:15,marginBottom:12},children:[Object(l.jsx)("span",{style:{fontSize:12},children:v}),(null===h||void 0===h?void 0:h.timestamp)===e.timestamp&&p&&Object(l.jsx)("span",{className:"read-indicator",style:{marginLeft:4},children:"Read"})]})]},n)}})),n&&Object(l.jsx)(a.a,{text:"",style:{paddingLeft:20,paddingRight:20,fontSize:12,fontWeight:800,letterSpacing:4},className:"chat-message bot"}),s]})}},420:function(e,t,n){},614:function(e,t,n){"use strict";var s=new Map;function i(e){var t=s.get(e);t&&t.destroy()}function o(e){var t=s.get(e);t&&t.update()}var c=null;"undefined"==typeof window?((c=function(e){return e}).destroy=function(e){return e},c.update=function(e){return e}):((c=function(e,t){return e&&Array.prototype.forEach.call(e.length?e:[e],(function(e){return function(e){if(e&&e.nodeName&&"TEXTAREA"===e.nodeName&&!s.has(e)){var t,n=null,i=window.getComputedStyle(e),o=(t=e.value,function(){r({testForHeightReduction:""===t||!e.value.startsWith(t),restoreTextAlign:null}),t=e.value}),c=function(t){e.removeEventListener("autosize:destroy",c),e.removeEventListener("autosize:update",a),e.removeEventListener("input",o),window.removeEventListener("resize",a),Object.keys(t).forEach((function(n){return e.style[n]=t[n]})),s.delete(e)}.bind(e,{height:e.style.height,resize:e.style.resize,textAlign:e.style.textAlign,overflowY:e.style.overflowY,overflowX:e.style.overflowX,wordWrap:e.style.wordWrap});e.addEventListener("autosize:destroy",c),e.addEventListener("autosize:update",a),e.addEventListener("input",o),window.addEventListener("resize",a),e.style.overflowX="hidden",e.style.wordWrap="break-word",s.set(e,{destroy:c,update:a}),a()}function r(t){var s,o,c=t.restoreTextAlign,a=void 0===c?null:c,l=t.testForHeightReduction,d=void 0===l||l,u=i.overflowY;if(0!==e.scrollHeight&&("vertical"===i.resize?e.style.resize="none":"both"===i.resize&&(e.style.resize="horizontal"),d&&(s=function(e){for(var t=[];e&&e.parentNode&&e.parentNode instanceof Element;)e.parentNode.scrollTop&&t.push([e.parentNode,e.parentNode.scrollTop]),e=e.parentNode;return function(){return t.forEach((function(e){var t=e[0],n=e[1];t.style.scrollBehavior="auto",t.scrollTop=n,t.style.scrollBehavior=null}))}}(e),e.style.height=""),o="content-box"===i.boxSizing?e.scrollHeight-(parseFloat(i.paddingTop)+parseFloat(i.paddingBottom)):e.scrollHeight+parseFloat(i.borderTopWidth)+parseFloat(i.borderBottomWidth),"none"!==i.maxHeight&&o>parseFloat(i.maxHeight)?("hidden"===i.overflowY&&(e.style.overflow="scroll"),o=parseFloat(i.maxHeight)):"hidden"!==i.overflowY&&(e.style.overflow="hidden"),e.style.height=o+"px",a&&(e.style.textAlign=a),s&&s(),n!==o&&(e.dispatchEvent(new Event("autosize:resized",{bubbles:!0})),n=o),u!==i.overflow&&!a)){var j=i.textAlign;"hidden"===i.overflow&&(e.style.textAlign="start"===j?"end":"start"),r({restoreTextAlign:j,testForHeightReduction:!0})}}function a(){r({testForHeightReduction:!0,restoreTextAlign:null})}}(e)})),e}).destroy=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],i),e},c.update=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],o),e});var r=c;t.a=r},615:function(e,t,n){"use strict";var s=n(14),i=n(26),o=n.n(i),c=n(12),r=n(129),a=n(88),l=n(23),d=n(20),u=(n(420),n(11)),j=function(e){var t,n,s,i,o,c=e.conversation,r=e.oidcUser,a=e.userId,l=e.showCourses;if(!c)return Object(u.jsx)("div",{});var d=c.messages.filter((function(e){return String(e.userId)!==String(a)&&"0"!==String(e.userId)})),j=d.length>0?d.length-1:-1,f=j>=0&&d[j].isRead,v=l?null!==(n=d[j])&&void 0!==n?n:{}:null!==(t=c.messages.find((function(e){return String(e.userId)===String(c.userId)})))&&void 0!==t?t:{};return Object(u.jsxs)("div",{style:{display:"flex",flexDirection:"row",width:"80%"},children:[Object(u.jsx)("div",{style:{marginRight:8},children:f?Object(u.jsx)("div",{className:"is-read-empty"}):Object(u.jsx)("div",{className:"is-read-indicator"})}),Object(u.jsx)("div",{children:(null===(s=v.user)||void 0===s?void 0:s.profileMiniImageUrl)?Object(u.jsx)("img",{style:{width:40,height:40,borderRadius:20},src:"".concat(null===(i=v.user)||void 0===i?void 0:i.profileMiniImageUrl,"?access_token=").concat(null===r||void 0===r?void 0:r.access_token),alt:""}):Object(u.jsx)("i",{style:{fontSize:50,padding:8},className:"fa fa-user-circle"})}),Object(u.jsxs)("div",{style:{display:"flex",flexDirection:"column",marginLeft:16},children:[Object(u.jsx)("div",{style:{fontSize:16,fontWeight:800},children:null===(o=v.user)||void 0===o?void 0:o.userDisplayName}),Object(u.jsx)("div",{className:"clamp-overflow-1",style:{fontSize:14},children:"".concat(c.courseCode,": ").concat(c.courseName)}),Object(u.jsx)("div",{className:"clamp-overflow-1",style:{fontSize:14},children:"Lesson: ".concat(c.lessonName)})]})]})},f=function(e){var t,n,s,i=e.conversation,o=e.courseData,c=(e.userId,null===(t=o.find((function(e){return e.courseCode===i.courseCode})))||void 0===t?void 0:t.courseIcon),r=(null===(n=o.find((function(e){return e.courseCode===i.courseCode})))||void 0===n||null===(s=n.units.map((function(e){return e.lessons})).flat().find((function(e){return String(e.id)===String(i.lessonId)})))||void 0===s?void 0:s.rank)+1;return Object(u.jsxs)("div",{style:{display:"flex",flexDirection:"row",width:"80%"},children:[Object(u.jsx)("div",{children:Object(u.jsx)("img",{style:{width:40,height:40,borderRadius:20},src:Object(l.w)(null!==c&&void 0!==c?c:""),alt:""})}),Object(u.jsxs)("div",{style:{display:"flex",flexDirection:"column",marginLeft:16},children:[Object(u.jsx)("div",{className:"clamp-overflow-1",style:{fontSize:15,fontWeight:800},children:"".concat(i.courseCode," - Lesson ").concat(r,": ").concat(i.lessonName)}),Object(u.jsx)("div",{className:"clamp-overflow-1",style:{fontSize:13},children:"Course: ".concat(i.courseName)})]})]})};t.a=function(e){var t=e.conversations,n=e.onMessageClick,i=e.style,l=e.emptyMessage,v=void 0===l?"No messages":l,b=e.showResolved,h=e.showCourses,p=Object(a.n)(),O=Object(d.d)(),m=Object(d.e)((function(e){return e.oidc.user})),x=Object(d.e)((function(e){var t;return null===(t=e.commonData.profileAboutMe.data)||void 0===t?void 0:t.userId})),g=Object(d.e)((function(e){return e.student.data.courses.data})),y=Object(d.e)((function(e){return e.support.chatbot.currentConversation}));return Object(c.useEffect)((function(){h&&O(r.d.fetchCourses())}),[]),t.length<=0?Object(u.jsx)("div",{style:{display:"flex",justifyContent:"center",padding:24},children:Object(u.jsx)("p",{children:v})}):Object(u.jsx)("div",{style:Object(s.a)(Object(s.a)({},i),{},{overflowY:"auto",overflowX:"hidden",display:"flex",flexDirection:"column"}),children:t.map((function(e,t){var s,i=e.messages[e.messages.length-1],c=i.timestamp,r=o()().startOf("day"),a=o()(c);return s=a.isSame(r,"d")?a.format("h:mm A"):a.format("MM/DD/YYYY"),Object(u.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"100%",minHeight:150,borderBottom:"1px solid #e0e0e0",padding:8},className:"message-history-item".concat(p.params.conversationId===e.id||(null===y||void 0===y?void 0:y.id)===e.id?"-active":""),role:"button",onClick:function(){return n(e)},children:[Object(u.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",flexDirection:"row",color:"black"},children:[h&&!e.isOpen?Object(u.jsx)(f,{userId:x,conversation:e,courseData:g}):Object(u.jsx)(j,{conversation:e,oidcUser:m,userId:x,showCourses:h}),Object(u.jsx)("div",{children:!e.isOpen&&b?Object(u.jsx)("div",{className:"resolved-message-indicator",children:Object(u.jsx)("span",{children:Object(u.jsx)("i",{className:"fa fa-check"})})}):Object(u.jsx)("div",{children:Object(u.jsx)("span",{style:{fontSize:12},children:s})})})]}),Object(u.jsx)("div",{style:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:"3",WebkitBoxOrient:"vertical",width:"100%",fontSize:14,paddingTop:12,paddingLeft:56,color:"#6c757d"},children:Object(u.jsx)("span",{children:i.content})})]},t)}))})}},616:function(e,t,n){"use strict";n(12),n(122);var s=n(198),i=n(11);t.a=function(e){var t=e.onClick,n=e.content,o=e.onClickContent,c=e.showButton,r=void 0===c||c,a=e.showLoading,l=void 0!==a&&a,d=e.children,u=void 0===d?null:d;return Object(i.jsx)("div",{className:"feedback-container",children:Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[Object(i.jsx)("div",{children:u||Object(i.jsx)("p",{children:n})}),l&&Object(i.jsx)("div",{children:Object(i.jsx)(s.a,{text:"",style:{fontSize:12,fontWeight:800,letterSpacing:4}})})]}),r?Object(i.jsx)("div",{className:"actions-container",style:{justifyContent:"center"},children:Object(i.jsx)("div",{role:"button",className:"mentor-request-button",onClick:function(){t&&t()},children:o})}):Object(i.jsx)("div",{className:"actions-container",style:{height:24}})]})})}}}]);
//# sourceMappingURL=8.4e0d71c5.chunk.js.map